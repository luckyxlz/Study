# 接口，多态

### 接口

#### 概述

- 接口（英文：Interface），在Java编程语言中是一个抽象类型，接口中定义的全都是抽象方法，使用**Interface**来声明。一个类通过继承接口的方式，从而来继承接口的抽象方法。

- 一个类继承接口则需要实现该接口的所有的抽象方法，除非继承接口的类是抽象类，因此一个类继承接口我们往往称为某个类实现了（implements）某个接口，关键字从extends更换为**implements**；

#### 特点

- 接口中的所有成员变量都默认是由**public static final**修饰的；
- 接口中的所有方法都默认是由**public abstract**修饰的；
- 接口没有构造方法（不能实例化对象）；
- 类继承（实现）接口时，必须重写接口中的所有抽象方法，否则该类是抽象类；
- 接口与接口之间采用多继承机制；
- 接口中没有静态代码块。
- 接口的静态方法不能被继承下来；

#### 语法

```java
public interface 接口名称 {
    // 抽象方法
    // 默认方法
    // 静态方法
    // 私有方法
}
```

- 抽象方法：使用 `abstract` 关键字修饰，可以省略，没有方法体。该方法供子类实现使用。
- 默认方法：使用 `default` 修饰，**不可省略**，供子类调用或者子类重写。
- 静态方法：使用 `static` 修饰，供接口直接调用（接口中，被static修饰的方法不能被继承到子类）。
- 私有方法：让接口本身可以封装某段逻辑但又不想被子类继承的方法；

> 私有方法的存在一般是给默认方法提供某段代码复用的逻辑而又不想被子类继承；
>



#### 接口的多实现

在继承体系中，一个类只能继承一个父类。而对于接口而言，一个类是可以实现多个接口的，这叫做接口的多实现。并且，一个类能继承一个父类，同时实现多个接口。

**普通抽象方法**

接口中，有多个抽象方法时，实现类必须重写所有抽象方法。**如果抽象方法有重名的，只需要重写一次**。

**默认方法**

运行存在默认方法，子类实现接口时，子类可以选择重写默认方法，也可以不重写（继承下来），那么在实现多个接口时，存在同名方法就会出现**钻石问题**；

> tips：**在实现多个接口中，如果多个接口中包含有同名方法，子类必须实现该方法。**

**静态方法**

在接口中，存在同名的静态方法并不会冲突，原因是只能通过各自接口名访问静态方法且接口中**静态方法不会被继承下去；**

**方法优先级**

当一个类，既继承一个父类，又实现若干个接口并且该接口（默认方法）存在和类同名方法时，子类就近选择执行**父类的成员方法**；





#### 接口的多继承

一个接口能继承另一个或者多个接口，这和类之间的继承比较相似。接口的继承使用 `extends` 关键字，子接口继承父接口的方法。如果父接口中的默认方法有重名的，那么子接口需要**重写一次**。





#### 接口的成员变量

接口中成员变量默认加上`public static final`修饰，接口中被static修饰的**方法**不能被继承，但被static修饰的**变量**（**常量**）是可以被继承的；









### 多态

#### 多态概述

多态也是面向对象中一项重大的特征，多态体现了程序的可扩展性、代码的复用性等；

- 多态：即事物（对象）存在的多种形态，简称多态；

#### 多态的用法

**多态的条件**

1. 继承或者实现
2. 方法的重写
3. 父类引用指向子类对象

一句话概括多态就是父类引用指向子类对象，在上一章案例中就是父类引用（Animal）指向了子类对象（Dog、Cat），多态一般伴随着重写的出现，调用者是父类，具体执行的方法则是子类（子类重写了父类的方法运行的是子类），因为只有子类的功能才能凸显多态性，不同的子类具备的功能是不一样的，那么有重写肯定就会有继承或者实现；

#### 多态的格式

```java
父类类型 变量名 = new 子类对象;
变量名.方法名();
```

> **当使用多态方式调用方法时，首先检查父类中是否有该方法，如果没有，则编译错误；如果有，执行的是子类重写方法。**





#### 多态的转型

**基本数据类型的自动转换**

- 自动转换：范围小的赋值给范围大的.自动完成：`double d = 10;`
- 强制转换：范围大的赋值给范围小的,强制转换：`int i = (int)6.88;`



**向上转型**

- **向上转型**：也叫自动类型提升；多态本身是子类类型向父类类型向上转换的过程，这个过程是**默认**的。当父类引用指向一个子类对象时，便是向上转型。

- ```java
  父类类型  变量名 = new 子类类型();
  如：Animal a = new Cat();
  ```



**向下转型**

- **向下转型**：父类类型向子类类型向下转换的过程，这个过程是强制的。一个已经向上转型的子类对象，将父类引用转为子类引用，可以使用强制类型转换的格式，便是向下转型。

- ```java
  子类类型 变量名 = (子类类型) 父类变量名;
  Animal animal=new Cat();
  如: Cat c =(Cat) animal;  
  ```

> 注意事项：
>
> **在向下转型时，必须保证源类型就是需要转换的类型，如上述中的animal原本就是Cat类型，只不过向上提升为了Animal类型；不能强制把一个Animal转换为Cat，或者把其他类型（Dog）转换为猫；**





### Instanceof关键字

instanceof 是 Java 的一个二元操作符，类似于 ==，>，< 等操作符，它的作用是测试它左边的对象是否是它右边的类的实例，返回 boolean 的数据类型。



















